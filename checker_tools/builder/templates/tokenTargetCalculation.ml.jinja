(* Automatically generated by checker_tools.builder. DO NOT EDIT DIRECTLY! *)

open Common
open FixedPoint

(** Calculate the current target based on the current quantity, and the current
    price of kit in ctok (as given by the CFMM).
    {[
      target_{i+1} = FLOOR (q_{i+1} / kit_in_ctok_{i+1})
    ]}
*)
let[@inline] compute_current_target (current_q: fixedpoint) (_current_index: fixedpoint) (current_kit_in_ctok: ratio) : fixedpoint =
  let { num = num; den = den; } = current_kit_in_ctok in
  fixedpoint_of_ratio_floor
    (make_ratio
       (Ligo.mul_int_int den (fixedpoint_to_raw current_q))
       (Ligo.mul_int_int num fixedpoint_scaling_factor_int)
    )
